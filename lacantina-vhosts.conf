<VirtualHost *:443>
    DocumentRoot "/var/www/html/public"
    ServerName localhost

    SSLEngine on
    SSLCertificateFile "/etc/ssl/certs/lacantina.crt"
    SSLCertificateKeyFile "/etc/ssl/private/lacantina.key"

   <Directory "/var/www/html/public">
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted
    </Directory>
    
    # Protección del directorio /admin con htpasswd
    <Directory "/var/www/html/public/admin">
        AuthType Basic
        AuthName "Área Restringida - Administración"
        AuthUserFile "/var/www/html/.htpasswd"
        Require valid-user
    </Directory>

    # Para que /php sea accesible como alias
    Alias /php "/var/www/html/php"
    <Directory "/var/www/html/php">
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted
    </Directory>
    
    ErrorLog ${APACHE_LOG_DIR}/lacantina/error.log
    CustomLog ${APACHE_LOG_DIR}/lacantina/access.log combined
</VirtualHost>

# Opcional: redirigir HTTP a HTTPS
<VirtualHost *:80>
    ServerName localhost
    Redirect permanent / https://localhost/
</VirtualHost>